---
- name: Create EC2 Security Group
  hosts: localhost
  connection: local
  become: false
  gather_facts: false

  tasks:
  - name: Create security group
    ec2_group:
      name: "{{ ec2_sg_name }}"
      description: "DevSecOps Demo Security Group"
      region: "{{ ec2_region }}"
      rules:
        - proto: tcp
          from_port: 22
          to_port: 22
          cidr_ip: 0.0.0.0/0
        - proto: tcp
          from_port: 80
          to_port: 80
          cidr_ip: 172.31.25.163/32